# CoffeeMachine 

**Курсовая работа**

## Суть проекта

Данный проект — интерактивная образовательная платформа на C# (WPF/WinUI) для изучения методов формальной верификации программ. На примере модели кофемашины демонстрируются практические приёмы работы с предусловиями/постусловиями, weakest precondition (WP) и анализом циклов.

Ключевые возможности
- Визуализация и проверка контрактов (предусловия / постусловия).
- WP-анализ для простых операторов и ветвлений (отчёты и пошаговые преобразования).
- Интерактивный анализ циклов: инварианты и variant-функции.
- Симуляция доменной модели (процессы нагрева, очистки, тестирования дозаторов) и управление ресурсами.
- Мониторинг состояния через логический контроллер - анализ текущего состояния системы в реальном времени.

## Как использовать

Ниже перечислены основные сценарии работы в приложении.

1) Приготовление напитка
- Выберите тип напитка (Espresso, Americano, Cappuccino, Latte).
- Настройте уровень сахара.
- Убедитесь, что все предусловия выполнены (индикаторы зелёные).
- Нажмите **Приготовить кофе**.

2) Пополнение ингредиентов
- Выберите ингредиент и укажите количество или `Заполнить до максимума`.
- Проверьте предусловия.
- Выполните операцию пополнения.

3) Техническое обслуживание
- Выберите тип обслуживания (Cleaning, DeepCleaning, Calibration, Diagnostic).
- Настройте опции (например, сброс статистики или слив воды) и выполните обслуживание.

4) Анализ циклов
- Выберите процесс (нагрев воды, очистка бака, тестирование дозаторов).
- Задайте параметры и запустите анализ.
- Изучите подробный отчёт (шаги итераций, проверка инварианта и варианта).

5) Мониторинг состояния через логический контроллер
- отображает один из статусов работы
- показывает состояние логических переменных
- развернутый отчет с детализированной диагностикой всех систем

## Архитектура проекта

<img width="1159" height="406" alt="image" src="https://github.com/user-attachments/assets/1b020d6f-d0da-4325-a71d-3da5a3497f62" />

Коротко:
- UI: `CoffeeMachine/Views` (WPF/XAML)
- MVVM: `CoffeeMachine/ViewModels`
- Модели предметной области: `CoffeeMachine/Models`
- Анализ и вспомогательные сервисы: `CoffeeMachine/Analysis`, `CoffeeMachine/Services`
- Конвертеры и вспомогательные классы: `CoffeeMachine/Converters`

## Технические требования

- ОС: Windows 10 / 11
- .NET SDK / Runtime: 8.0 или выше
- Рекомендуется Visual Studio 2022 с поддержкой .NET 8
- Пакеты: `CommunityToolkit.Mvvm` (указаны в `CoffeeMachineWPF.csproj`)

Минимальные требования: 2 GB RAM, разрешение экрана 1280×720.

## Как запустить

Вариант A — из Visual Studio
1. Откройте `CoffeeMachine.sln`.
2. Выберите в качестве стартового проекта `CoffeeMachineWPF`.
3. Нажмите F5 или Run.

Вариант B — из командной строки (PowerShell)

```powershell
dotnet restore
dotnet build
dotnet run --project .\CoffeeMachine\CoffeeMachineWPF.csproj
```

Или после публикации запустите исполняемый файл из `publish`-папки:

```powershell
.\publish\CoffeeMachineWPF.exe
```

## Примеры использования

1) Верификация приготовления эспрессо

Предусловия:
- Машина не сломана
- Достаточно воды (≥ 50 мл)
- Достаточно кофе (≥ 10 г)
- Есть стаканчик
- Машина не занята

Постусловия:
- Напиток приготовлен
- Ресурсы уменьшены
- Счётчик напитков увеличен

2) Анализ цикла нагрева воды (псевдокод)

```text
temp := 20
while (temp < 95) {
	temp := temp + 5
	if (temp > 100) break
}
```

Инвариант: `20 ≤ temp ≤ 100`
Вариант: `95 - temp`

3) Пополнение ингредиентов

Условия корректности: количество > 0, не превышает максимальную ёмкость.

4)Анализ состояния 

CanMakeCoffee = HasWater ∧ HasCoffee ∧ HasCups ∧ IsHeated ∧ IsClean = True

## Тесты

Набор юнит-тестов находится в `TestProject1` (`TestProject1/UnitTest1.cs`) и покрывает основные сценарии работы модулей.

## Разработчики

- Алексеев Кирилл 
- Маркина Виктория
- Суворов Иван
- Цветкова Вероника

-Научный руководитель: Лисничук Арина Бахытжановна

-Учебное заведение: Тверской государственный технический университет
-Факультет: Информационных технологий
-Кафедра: Программное обеспечение
-Год разработки: 2025

